<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.310">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EJ Data Editor - Prepare and Submit your Replication Package</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./img/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-48S9X9V28L"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
 
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });
gtag('config', 'G-48S9X9V28L', { 'anonymize_ip': true});
</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./img/logo-v2-1.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">EJ Data Editor</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./before.html" rel="" target="">
 <span class="menu-text">Before You Submit</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./best.html" rel="" target="">
 <span class="menu-text">Best Practices</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./package.html" rel="" target="" aria-current="page">
 <span class="menu-text">Prepare the Package</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./faqs.html" rel="" target="">
 <span class="menu-text">FAQs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./de.html" rel="" target="">
 <span class="menu-text">Data Editor</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link active" data-scroll-target="#preliminaries">Preliminaries</a></li>
  <li><a href="#contents-of-replication-package" id="toc-contents-of-replication-package" class="nav-link" data-scroll-target="#contents-of-replication-package">Contents of Replication Package</a></li>
  <li><a href="#the-readme-file" id="toc-the-readme-file" class="nav-link" data-scroll-target="#the-readme-file">The <code>README</code> File</a></li>
  <li><a href="#data-citations" id="toc-data-citations" class="nav-link" data-scroll-target="#data-citations">Data Citations</a></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best Practices</a></li>
  <li><a href="#submitting-your-package" id="toc-submitting-your-package" class="nav-link" data-scroll-target="#submitting-your-package">Submitting Your Package</a></li>
  <li><a href="#after-the-reproducibility-checks-are-completed-publish-your-package" id="toc-after-the-reproducibility-checks-are-completed-publish-your-package" class="nav-link" data-scroll-target="#after-the-reproducibility-checks-are-completed-publish-your-package">After the reproducibility checks are completed: publish your package!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Prepare and Submit your Replication Package</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>After your Managing Editor conditionally accepts your paper (and before she sees your final response and proceeds to final acceptance) your paper will go through reproducibility and anti-plagiarism checks. Therefore, in your last re-submission you are requested to submit, via Editorial Express, your final files for production, your online appendices, and your replication package. It is important that you carefully follow the instructions below to ensure that your paper and your replication package are not mishandled. This page provides you with detailed information that will help you preparing your replication package. Read it carefully before you submit!</p>
<section id="preliminaries" class="level2">
<h2 class="anchored" data-anchor-id="preliminaries">Preliminaries</h2>
<p>You are <strong>requested</strong> to submit a single <code>zip</code> file with the following <strong>folder structure</strong> (please name your folders in this <em>exact</em> way! Notice there should be <em>no spaces</em> in folder names, and <em>no capital letters</em>). In short, the content of your <code>zip</code> file looks as follows:</p>
<pre><code>├── 1-paper
├── 2-appendices
├── 3-replication-package.zip
└── 4-confidential-data-not-for-publication.zip  (Optional)</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Folders 3 and 4 are in <code>zip</code> format!
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Both folder 3 and folder 4 are <code>zip</code> archives.</li>
<li>Only include folder 4 with restricted data if an exemption to the Data and Code Availability Policy has been granted to you and you are providing the replication team with temporary access to the data; all codes and unrestricted data should go to folder 3.</li>
</ol>
</div>
</div>
<p>For folders 1 and 2, please refer to the Economic Journal’s <a href="https://academic.oup.com/ej/pages/General_Instructions">General Instructions to Authors</a> and <a href="https://academic.oup.com/DocumentLibrary/EJ/Guide_for_Accepted_Authors_19.pdf">Guide for Accepted Authors</a> and carefully follow the instructions indicated there. In the lines below, you will find specific guidelines about folder 3 and, if you were granted a data exemption at the time of first submission (see <a href="./before.html#apply-to-exemptions-to-the-data-and-code-availability-policy">here</a>, <a href="./faqs.html#data-and-code-availability-policy-and-exemptions">here</a>, and <a href="./faqs.html#procedures-when-exemptions-are-granted">here</a> for details), also folder 4.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Sign and Submit Checklist ☑
</div>
</div>
<div class="callout-body-container callout-body">
<p>Along with your package, you are requested to download, fill, sign and submit <a href="./static/Checklist_for_authors_July2023.pdfchecklist.pdf">this checklist</a>, which refers to the content of the package below</p>
</div>
</div>
</section>
<section id="contents-of-replication-package" class="level2">
<h2 class="anchored" data-anchor-id="contents-of-replication-package">Contents of Replication Package</h2>
<p>As indicated in the journal’s <a href="https://academic.oup.com/ej/pages/General_Instructions#data">Data and Code Availability Policy</a> all packages should include the following information:</p>
<ul>
<li>A <code>README</code> file in PDF format (<code>README.pdf</code>). We strongly recommend using <a href="https://social-science-data-editors.github.io/template_README/">this template</a>. You may find in <a href="https://www.templatereadme.org/">this web app</a> a convenient tool to create your <code>README</code> file.</li>
<li>The <strong>raw datasets</strong> used in the paper and online appendices, including a complete, transparent and precise documentation describing all variables. You can additionally provide the analysis data if this is helpful, but they are not required if the raw data are provided. If you were granted a data exemption at the time of first submission (see <a href="./before.html#apply-to-exemptions-to-the-data-and-code-availability-policy">here</a>, <a href="./faqs.html#data-and-code-availability-policy-and-exemptions">here</a>, and <a href="./faqs.html#procedures-when-exemptions-are-granted">here</a> for details), you should either provide the replication team with <strong>temporary access</strong> to the data for the sole purpose of performing the reproducibility checks, or you should submit a <strong>synthetic/simulated</strong> dataset that allows running the code and produce all outputs in the paper and appendices, even if the results do not match those in the paper.</li>
<li>Both the data cleaning codes and the analysis codes that produce all reproducible outputs reported in the article, appendix, and online appendices (including figures, tables, and numbers reported in the text). If some results are produced without scripts (e.g.&nbsp;ArcGIS maps), the <code>README</code> file should include step-by-step <em>very detailed instructions</em> on how to produce that output. In case of simulation/Monte Carlo studies, the authors are requested to set a seed so that the exact numbers that are reported can be obtained.</li>
<li>If data are provided in proprietary format (e.g.&nbsp;Stata’s <code>.dta</code>), a copy of the data in non-proprietary format (e.g.&nbsp;<code>ASCII</code>, <code>.csv</code>).</li>
</ul>
<p><strong>Experimental papers</strong> should additionally include the following PDF documents (if these files are part of the paper or of an appendix, copy them again in a separate document and include them in the replication package):</p>
<ol type="1">
<li>A document outlining the <strong>design</strong> of the experiment.</li>
<li>A copy of the <strong>instructions</strong> given to participants, in both the original language and an English translation.</li>
<li>Information on the <strong>selection and eligibility</strong> of participants.</li>
<li>A PDF copy of the <strong>Institutional Review Board (IRB) approval</strong> of one of the authors’ institutions (IRB approval number, date, name of the institution) or an explicit mention that an exemption has been granted by the Editorial Board.</li>
</ol>
</section>
<section id="the-readme-file" class="level2">
<h2 class="anchored" data-anchor-id="the-readme-file">The <code>README</code> File</h2>
<p>The <code>README</code> file should provide enough instructions so that all users (level of an advanced PhD student and above) can reproduce all the results in the paper in a reasonable amount of time and without problems. We strongly recommend using <a href="https://social-science-data-editors.github.io/template_README/">this template</a>.You may find in <a href="https://www.templatereadme.org/">this web app</a> a convenient tool to create your <code>README</code> file. The <strong>minimum required information includes</strong>:</p>
<ol type="1">
<li>A <strong>verbal description</strong> of the content of the package (datasets, programs, folders, etc.)</li>
<li><strong>Data Availability Statement</strong>: precise indications on how the data were obtained, including required registrations, memberships, application procedures, monetary cost, or other qualifications, and, if applicable, URL to download them (which is typically part of the data citation).</li>
<li>Precise <strong>instructions</strong> on how to run the code.</li>
<li>Indications on where each piece of output is saved or displayed. (See best practices below)</li>
<li><strong>Software requirements</strong>, including the software version and operating system used by the authors.</li>
<li>All <strong>packages and libraries</strong> that need to be installed to run the code and a clear indication on how to obtain them.</li>
<li><strong>Expected running time</strong> (even if it is a few seconds). When relevant, include the hardware that the estimated time refers to.</li>
<li><strong>Data citations</strong>: all datasets used in the paper (with no exceptions) should be listed in the references section of the paper in the same way that we cite other papers, and a copy of these citations should appear in a dedicated section of the ReadMe file. You can find some examples in page 7 of this document.</li>
</ol>
</section>
<section id="data-citations" class="level2">
<h2 class="anchored" data-anchor-id="data-citations">Data Citations</h2>
<p>All datasets used in the paper (with no exceptions) should be listed <em>in the references section of the paper</em> in the same way that we cite other papers, and a copy of these citations should appear in a dedicated section of the <code>README</code> file. You can find some examples in page 7 of <a href="https://static.primary.prod.gcms.the-infra.com/static/site/ej/document/Guide_for_Accepted_Authors_30.4.2021.pdf?node=e998887d8e15edce6462&amp;version=332396:eb395244bcce871a1378">this document</a>.</p>
<p>If the data used in the study is part of the replication package of another paper, both the paper and the replication package should be cited.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data Citations Are Important!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Even commonly used datasets should be cited (in fact, funding of public and private institutions that make datasets available, even the most widely used ones, crucially depends on data citations!).</p>
</div>
</div>
<p>More specific guidance, and examples, on data citations is available <a href="https://social-science-data-editors.github.io/guidance/addtl-data-citation-guidance.html">here</a>.</p>
</section>
<section id="best-practices" class="level2">
<h2 class="anchored" data-anchor-id="best-practices"><a href="./best.html">Best Practices</a></h2>
<p>The Social Sciences Data Editors collaborate to establish a set of best practices for reproducibility packages. Please click <a href="./best.html">here</a> to consult our version of this list.</p>
</section>
<section id="submitting-your-package" class="level2">
<h2 class="anchored" data-anchor-id="submitting-your-package">Submitting Your Package</h2>
<p>Submit your final files and replication package via <a href="https://editorialexpress.com/ej">The EJ Editorial Express</a>. If size permits, submit all files into one zip file. If necessary, you can split your zip file into multiple smaller size files - for example using <a href="https://kb.winzip.com/help/winzip/help_splitdlg.htm">this</a> on windows or a version of this command on <code>*nix</code> systems:</p>
<pre><code># creates chunks of max 100MB
$ zip -r -s 100M split_package.zip replication-package/

$ ls -l split*                                        
-rw-r--r--  1 floswald  staff  104857600 Jul 26 16:54 split_package.z01
-rw-r--r--  1 floswald  staff  104857600 Jul 26 16:54 split_package.z02
-rw-r--r--  1 floswald  staff  104857600 Jul 26 16:54 split_package.z03
-rw-r--r--  1 floswald  staff  104857600 Jul 26 16:54 split_package.z04
-rw-r--r--  1 floswald  staff   41394717 Jul 26 16:54 split_package.zip</code></pre>
<p>(notice that you would have to submit <em>all file files</em> in this case, <em>also the <code>.zip</code> file</em>)</p>
<p>If, even splitting zip files, the files are still too large for the Editorial Express platform, please arrange an alternative transfer method with the Data Editor at ejdataeditor@gmail.com.</p>
<p>If you were granted a data exemption at the time of first submission (see <a href="./before.html#apply-to-exemptions-to-the-data-and-code-availability-policy">here</a>, <a href="./faqs.html#faqs-about-exemptions">here</a>, and <a href="./faqs.html#granted-exemptions">here</a> for details) , and you are allowed to provide the Data Editor and the replication team with temporary access to your restricted data for the sole purpose of the reproducibility checks, you should include the confidential data in a separate folder named <code>4-confidential-data-not-for-publication</code>.</p>
<p>The content of this folder will be destroyed after the reproducibility checks are completed. All replicators and the Data Editor have signed confidentiality agreements that protect your submission.</p>
<p>If you can provide temporary access but not by sharing the data in the <code>4-confidential-data-not-for-publication</code> folder, please contact the Data Editor at ejdataeditor@gmail.com to arrange an alternative access method.</p>
<p>A few days after you submitted the package (in most of the cases, within two weeks) you will be contacted by the Data Editor with the outcome of the reproducibility checks, regardless of whether the checks were successful or there are modifications to be made. <strong>Please add ejdataeditor@gmail.com and ej_foswald@editorialexpress.com to your safe contacts to avoid that the Data Editor’s messages go to spam!</strong></p>
<p>If you need to implement modifications of your package, you will be instructed to do so in the Data Editor’s response. You will iterate with the Data Editor until the reproducibility checks are satisfactory concluded.</p>
</section>
<section id="after-the-reproducibility-checks-are-completed-publish-your-package" class="level2">
<h2 class="anchored" data-anchor-id="after-the-reproducibility-checks-are-completed-publish-your-package">After the reproducibility checks are completed: publish your package!</h2>
<p>Once the reproducibility checks are concluded, you will be requested to perform an additional step: publish your replication package at the Economic Journal’s <a href="https://zenodo.org/communities/ej-replication-repository">community of Zenodo</a>. To do so, you need to complete the following steps:</p>
<ol type="1">
<li><p>Sign up <a href="https://zenodo.org/signup/">here</a> for a free zenodo account, if you don’t have one already.</p></li>
<li><p>Go to the Economic Journal’s community of Zenodo at https://zenodo.org/communities/ej-replication-repository.</p></li>
<li><p>Start a new upload within the community using the top-right green button in the below figure. <img src="./img/zenodo1.png" class="img-fluid"></p></li>
<li><p>Upload the <code>zip</code> compressed version of your replication package (i.e.&nbsp;the <strong>exact same</strong> archive <code>3-replication-package.zip</code> you sent us in your final iteration of the replication package). Drag-and-drop the zip file to upload it, as shown below. Make sure you only publish the replication package and <em>not</em> the paper or online appendices. Especially, <strong>do not publish the content of the <code>4-confidential-data-not-for-publication.zip</code> folder</strong>! <img src="./img/zenodo2.png" class="img-fluid"></p></li>
<li><p>Click on the Start upload green button to upload.<img src="./img/zenodo3.png" class="img-fluid"></p></li>
<li><p>If you didn’t skip step 2, your upload is already linked to the Economic Journal’s community.<img src="./img/Zenodo_community_1.png" class="img-fluid"> If your upload is not directly linked to the Economic Journal’s community, you can search the community on the search bar.<img src="./img/Zenodo_community_2.png" class="img-fluid"></p></li>
<li><p>Fill the required metadata:</p>
<ol type="1">
<li>Upload type: Software (or Dataset if you more applicable).</li>
<li>Publication date: leave the default today’s date.</li>
<li>Title: Replication package for: “{full title of your manuscript}”.</li>
<li>Authors: Typically the same authors as the manuscript, but you can add others who have contributed significantly to the code you are uploading, such as research assistants (in that case, you are making them coauthors of your replication package, but not of the paper).</li>
<li>Description: write a full citation to your manuscript as a description of what the replication package contains.</li>
<li>Other optional metadata: don’t worry about this, you can leave it blank. <img src="./img/Zenodo_metadata.png" class="img-fluid"></li>
</ol></li>
<li><p>Select an open-access license for your upload.<img src="./img/Zenodo_license.png" class="img-fluid"></p></li>
<li><p>Save the “Digital Object Identifier” (DOI) issued by Zenodo (see the image above) and email it to the Editorial Office at ej@res.org.uk. This DOI will appear in your published paper, and will hence link your article and your package.</p></li>
<li><p>Save and then Publish using the corresponding buttons that appear both at the bottom and at the page.<img src="./img/Zenodo_save_publish.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>once you press <code>publish</code>, you will not be able to edit or delete your uploaded files. You can create new versions of your upload at any point in the future, but these versions will have a different DOI (they will be linked to your earlier and future versions of the package, but they will not be directly linked to your paper). Please double-check that you publish the files that went through the reproducibility checks, and that you are <strong>not</strong> publishing the content you submitted in the folder <code>4-confidential-data-not-for-publication.zip</code>.</p>
</div>
</div></li>
<li><p>Send an email to the Data Editor which includes the <code>md5</code> string displayed on the zenodo page of your replication package (see below). This string serves to check whether the files included in the package, which the Data Editor has accepted, are <strong>exactly identical</strong> to the ones you uploaded to zenodo. This string is like an electronic fingerprint of your replication package. It’s important to note that you must not modify your package after final acceptance in any way (add/remove files or make edits), or this check will fail. What you upload needs to be <strong>exactly identical</strong> (at the bit-level of the contained files) to what you sent us in your final iteration.<img src="./img/zenodo-md5.png" class="img-fluid"></p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">EJ Data Editor: <a href="ejdataeditor@gmail.com">ejdataeditor@gmail.com</a> <br> EJ Editorial Office: <a href="ej@res.org.uk">ej@res.org.uk</a></div>   
    <div class="nav-footer-center">© <a href="https://floswald.github.io">Florian Oswald</a> 2023</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/RES-reproducibility">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/RESDataEditor">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>